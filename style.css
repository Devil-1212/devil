:root { --gold: #ffd700; --rose: #ff4f9a; --white: #ffffff; }
* { margin: 0; padding: 0; box-sizing: border-box; cursor: none !important; }

body { background: #0f000f; color: var(--white); font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; transition: background 4s ease; }
body.hot-weather { background: radial-gradient(circle, #2d0000, #0f000f); }

/* WAND & DUAL PARTICLES */
#magic-wand { position: fixed; pointer-events: none; z-index: 1000000; transform: translate(-50%, -50%); }
.wand-staff { width: 2px; height: 50px; background: linear-gradient(to top, var(--gold), transparent); box-shadow: 0 0 15px var(--rose); }
.wand-star { position: absolute; top: -15px; left: -10px; font-size: 20px; text-shadow: 0 0 15px var(--gold); }

.stardust-heart, .stardust-spark { position: fixed; pointer-events: none; z-index: 999999; animation: fadeOut 1.2s forwards; }
@keyframes fadeOut { 100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; } }

/* MAIN AUDIO PANEL */
.audio-panel { 
    position: fixed; top: 25px; right: 25px; z-index: 10000; 
    background: rgba(255,255,255,0.05); backdrop-filter: blur(15px); padding: 10px 18px; 
    border-radius: 40px; border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 12px; cursor: pointer !important; 
}
.visualizer { display: flex; align-items: flex-end; gap: 2px; height: 12px; }
.visualizer span { width: 2px; height: 3px; background: var(--rose); border-radius: 1px; }
.playing .visualizer span { animation: eq 0.6s infinite alternate; }
@keyframes eq { to { height: 12px; } }

/* REEL VOLUME SLIDER */
.reel-audio-container {
    position: sticky; top: 15px; z-index: 2000;
    background: rgba(255, 79, 154, 0.3); backdrop-filter: blur(15px);
    padding: 10px 20px; border-radius: 40px;
    display: flex; align-items: center; gap: 12px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    width: fit-content; margin: 0 auto 20px auto;
    pointer-events: auto !important;
}
#reel-volume-slider { -webkit-appearance: none; width: 100px; height: 6px; background: rgba(255, 255, 255, 0.2); border-radius: 10px; outline: none; cursor: pointer !important; }
#reel-volume-slider::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #fff; box-shadow: 0 0 10px var(--rose); cursor: pointer !important; }
.vol-icon { font-size: 14px; }
.vol-label { font-size: 8px; letter-spacing: 1px; font-weight: 600; }

/* BUTTONS */
.button-box { position: relative; width: 320px; height: 160px; display: flex; justify-content: center; align-items: center; margin-top: 20px; }
.control-btn { width: 120px; height: 50px; border-radius: 50px; border: none; font-weight: 600; position: absolute; transition: transform 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.yes { background: linear-gradient(45deg, #ff4f9a, #ff8da1); color: white; z-index: 101; box-shadow: 0 0 20px var(--rose); animation: heartBeat 1.5s infinite ease-in-out; }
.no { background: white; color: #ff4f9a; z-index: 100; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

/* SCENES & GLASS */
.scene { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; visibility: hidden; opacity: 0; transition: 1.5s; }
.scene.active { visibility: visible; opacity: 1; }
.glass-card { background: rgba(255,255,255,0.02); backdrop-filter: blur(25px); padding: 45px; border-radius: 35px; border: 1px solid rgba(255,255,255,0.08); text-align: center; }
.aurora-sky { position: fixed; inset: 0; background: radial-gradient(circle at var(--mx) var(--my), rgba(255, 79, 154, 0.1), transparent 50%); z-index: -1; }
.rising-heart { position: fixed; bottom: -50px; animation: up 12s linear forwards; opacity: 0.7; pointer-events: none; font-size: 120%;}
.falling-word { position: fixed; top: -50px; font-family: 'Dancing Script'; font-size: 20px; color: var(--gold); animation: down 14s linear forwards; opacity: 0.4; pointer-events: none; }
@keyframes up { to { transform: translateY(-120vh) rotate(45deg); } }
@keyframes down { to { transform: translateY(120vh) rotate(-45deg); } }

/* PAGE 2 LAYOUT */
.cinematic-container { width: 90vw; height: 85vh; background: rgba(255,255,255,0.02); backdrop-filter: blur(50px); border-radius: 30px; display: flex; overflow: hidden; }
.video-film-strip { width: 40%; border-right: 1px solid rgba(255,255,255,0.1); overflow-y: auto; scrollbar-width: none; padding: 25px; scroll-snap-type: y mandatory; }
.strip-inner video { width: 100%; border-radius: 15px; margin-bottom: 50px; background: #000; scroll-snap-align: center; transition: transform 0.4s ease; }

.letter-side { width: 60%; padding: 70px; display: flex; flex-direction: column; justify-content: center; background: rgba(0,0,0,0.3); overflow-y: auto;}
.script-title { font-family: 'Dancing Script'; font-size: 3.8rem; color: var(--rose); margin-bottom: 15px; }
#typewriter-content { font-family: 'Dancing Script'; font-size: 2.2rem; line-height: 1.5; color: #f0f0f0; overflow-y: auto; }
#typewriter-content::-webkit-scrollbar { display: none; }
#signature-final { font-family: 'Dancing Script'; font-size: 2.5rem; color: var(--gold); margin-top: 30px; opacity: 0; transition: 3s; display: flex; justify-content: center; align-items: center; animation: heartBeat 1.5s infinite ease-in-out;}

#petal-canvas { position: fixed; inset: 0; pointer-events: none; z-index: 5; opacity: 0; }
#transition-overlay { position: fixed; inset: 0; background: radial-gradient(circle, var(--rose), transparent); opacity: 0; pointer-events: none; z-index: 9999; transition: 1s; }
#gatekeeper { position: fixed; inset: 0; background: #000; z-index: 10000000; display: flex; flex-direction: column; align-items: center; justify-content: center; }

@keyframes heartBeat {
    0% { transform: translateX(-70px) scale(1); }
    50% { transform: translateX(-70px) scale(1.08); }
    100% { transform: translateX(-70px) scale(1); }
}

.yes:hover { transform: translateX(-70px) scale(1.15) !important; filter: brightness(1.1); }

/* --- MOBILE RESPONSIVE FIXES --- */
@media (max-width: 768px) {
    * { cursor: auto !important; } /* Restore cursor for touch */
    #magic-wand { display: none; } /* Wand is annoying on touch screens */
    
    .audio-panel { top: 10px; right: 10px; padding: 6px 12px; }
    .track-meta p { font-size: 12px; }

    .glass-card { width: 90%; padding: 25px; }
    .glow-title { font-size: 1.5rem; }
    
    /* Stack the Video and Letter vertically */
    .cinematic-container { flex-direction: column; height: 95vh; width: 95vw; }
    .video-film-strip { width: 100%; height: 40%; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .letter-side { width: 100%; height: 60%; padding: 20px; }
    
    .script-title { font-size: 2rem; }
    #typewriter-content { font-size: 1.2rem; }
    
    /* Fix the "Yes" button positioning for mobile */
    @keyframes heartBeat {
        0% { transform: translateX(0) scale(1); }
        50% { transform: translateX(0) scale(1.08); }
        100% { transform: translateX(0) scale(1); }
    }
    .yes, .yes:hover { transform: translateX(0) !important; position: static; margin-bottom: 10px; }
    .no { position: static; }
    .button-box { flex-direction: column; height: auto; gap: 15px; }
}